var Modality=function(){var e=document.getElementsByTagName("body")[0],t={modalClass:"modality-modal",innerClass:"mm-wrap",openClass:"mm-show",userClass:"",clickOffToClose:true,closeOnEscape:true,openOnLoad:false,autoBind:true,effect:"effect-1",onOpen:function(){},onClose:function(){}},n=function(){var e=arguments;for(var t=1;t<e.length;t++)for(var n in e[t])if(e[t].hasOwnProperty(n))e[0][n]=e[t][n];return e[0]},r=function(e,t,n){if(e.attachEvent){e["e"+t+n]=n;e[t+n]=function(){e["e"+t+n](window.event)};e.attachEvent("on"+t,e[t+n])}else{e.addEventListener(t,n,false)}},i=function(e,t){var n=document.createElement("div");n.setAttribute("class",t.modalClass+" "+t.effect+" "+t.userClass);n.innerHTML='<div class="'+t.innerClass+'">'+e.outerHTML+"</div>";e.parentNode.replaceChild(n,e);return n},s=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},o=function(e,t){if(Array.isArray(e)){for(var n=0;n<e.length;n++){o(e[n],t)}}else{if(!s(e,t)){e.className+=" "+t}}},u=function(e,t){if(Array.isArray(e)){for(var n=0;n<e.length;n++){u(e[n],t)}}else{if(s(e,t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)","g");e.className=e.className.replace(r,"")}}},a=function(s,o,u){var f=this;f._body=e;f._defaults=t;f.id=s.getAttribute("id");f.settings=n({},t,o);f.wrapper=i(s,f.settings);f.triggers=document.querySelectorAll('a[href="#'+f.id+'"], [data-modality="#'+f.id+'"]');f.element=document.getElementById(f.id);if(f.settings.autoBind){for(var l=0;l<f.triggers.length;l++)f.setTrigger(f.triggers[l])}if(f.settings.clickOffToClose){r(f.wrapper,"click",function(e){e.preventDefault();if(e.target==f.wrapper)f.close()},false)}if(f.settings.closeOnEscape){r(f._body,"keyup",function(e){if(e.keyCode==27)f.close()},false)}if(f.element.style.display=="none")f.element.style.display="";if(f.settings.openOnLoad)f.open();if(typeof u=="function")u();return a.lookup[f.id]=f};n(a.prototype,{open:function(e){o([this.wrapper,this._body],this.settings.openClass);if(typeof this.settings.onOpen=="function")this.settings.onOpen();if(typeof e=="function")e();return this},close:function(e){u([this.wrapper,this._body],this.settings.openClass);if(typeof this.settings.onClose=="function")this.settings.onClose();if(typeof e=="function")e();return this},toggle:function(e){return this.isOpen()?this.close(e):this.open(e)},isOpen:function(){return s(this.wrapper,this.settings.openClass)},setTrigger:function(e){var t=this;r(e,"click",function(e){e.preventDefault();t.toggle()},false);return this}});a.init=function(e,t,n){var r=document.querySelectorAll(e);for(var i=0;i<r.length;i++){var s=new a(r[i],t,n);if(r.length==1){return s}}return a.lookup};a.lookup={};return a}()